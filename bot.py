import asyncio
from telegram import Bot
from datetime import datetime, date
import os
import random

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏ chat_id –∏–∑ GitHub Secrets
TOKEN = os.environ["TOKEN"]
CHAT_ID = int(os.environ["CHAT_ID"])

# –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
end_subscription = date(2026, 1, 29)
days_left = (end_subscription - date.today()).days
if days_left < 0:
    days_left = 0

# –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞
today = datetime.now().strftime("%d.%m.%Y")

# –°–ø–∏—Å–æ–∫ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
phrases = [
    "–ù–µ —Å–¥–∞–≤–∞–π—Å—è –∏ –¥–≤–∏–≥–∞–π—Å—è –∫ —Ü–µ–ª–∏!",
    "–ü–æ–º–Ω–∏, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —à–∞–≥ –∫ —É—Å–ø–µ—Ö—É!",
    "–î–∞–≤–∞–π, —Å–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å –≤ –∑–∞–ª–µ!",
    "–≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å, —á—Ç–æ–±—ã –ø–æ–π—Ç–∏ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª –∏ –Ω–∞—á–∞—Ç—å –º–µ–Ω—è—Ç—å—Å—è –∫ –ª—É—á—à–µ–º—É!",
    "–°–µ–≥–æ–¥–Ω—è –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –¥–µ–Ω—å! –î–µ–π—Å—Ç–≤—É–π",
    "–õ—É—á—à–µ –ø–æ–∑–¥–Ω–æ, —á–µ–º –Ω–∏–∫–æ–≥–¥–∞",
    "–¢—ã —É–∂–µ –Ω–∞ –ø–æ–ª –ø—É—Ç–∏ –∫ –±–æ–ª—å—à–∏–º –∏–∑–º–∏–Ω–µ–Ω–∏—è–º, –¥–µ–π—Å—Ç–≤—É–π!",
    "–ú—ã –≤—Å–µ –≤–µ—Ä–∏–º –≤ —Ç–µ–±—è ‚Äî –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –ø–æ–π—Ç–∏ –∏ —Å–¥–µ–ª–∞—Ç—å!",
	"–ö–∞–∂–¥—ã–π –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –º–∏–Ω—É—Å —à–∞–≥ –∫ —Ü–µ–ª–∏, –Ω–µ —Å–µ–≥–æ–¥–Ω—è!",
    "–°–µ–≥–æ–¥–Ω—è –Ω–µ ¬´–∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å¬ª, —Å–µ–≥–æ–¥–Ω—è ‚Äî —Ç–æ—Ç —Å–∞–º—ã–π –¥–µ–Ω—å",
	"–°–ª–∞–±–æ—Å—Ç—å ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –Ω–∞–¥–æ–ª–≥–æ. –í–ø–µ—Ä—ë–¥!",
	"–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∑–∞–ª –Ω–µ –∫—É—Å–∞–µ—Ç—Å—è, –∞ –≤–æ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω—ã–π",
	"–ê–±–æ–Ω–µ–º–µ–Ω—Ç –∂–¥—ë—Ç, –º—ã—à—Ü—ã —Å–∫—É—á–∞—é—Ç, –ø–æ—Ä–∞ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é",
	"–õ—É—á—à–µ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞—Ç—å ‚Äî –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π!",
	"–¢—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å. –ü—Ä–æ–≤–µ—Ä—å —ç—Ç–æ —Å–µ–≥–æ–¥–Ω—è",
	"–ú–∏–Ω—É—Ç—ã –≤ –∑–∞–ª–µ —Å–µ–≥–æ–¥–Ω—è = —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∑–∞–≤—Ç—Ä–∞. –î–µ–π—Å—Ç–≤—É–π!"
]

# –°–ø–∏—Å–æ–∫ —ç–º–æ–¥–∑–∏ –¥–ª—è —É–∫—Ä–∞—à–µ–Ω–∏—è
emojis = ["üí™", "üî•", "üèãÔ∏è‚Äç‚ôÇÔ∏è", "‚ö°", "üèÉ‚Äç‚ôÇÔ∏è"]

# –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –∏ —ç–º–æ–¥–∑–∏
phrase = random.choice(phrases)
emoji = random.choice(emojis)

# –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
message = f"–í–∞–ª–µ–Ω—Ç–∏–Ω, —Å–µ–≥–æ–¥–Ω—è —É–∂–µ {today}! \n{phrase} {emoji} \n–î–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ –æ—Å—Ç–∞–ª–æ—Å—å –≤—Å–µ–≥–æ {days_left} –¥–Ω–µ–π."

async def send_message():
    async with Bot(token=TOKEN) as bot:
        await bot.send_message(chat_id=CHAT_ID, text=message)
        print("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:", message)

async def main():
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ...")
    await asyncio.sleep(3)
    await send_message()

if __name__ == "__main__":
    asyncio.run(main())
