import asyncio
from telegram import Bot
from datetime import datetime, date
import os
import random

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏ chat_id –∏–∑ GitHub Secrets
TOKEN = os.environ["TOKEN"]
CHAT_ID = int(os.environ["CHAT_ID"])

# –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏
START_DATE = date(2026, 1, 19)

today_date = date.today()
days_from_start = (today_date - START_DATE).days + 1
if days_from_start < 1:
    days_from_start = 1

# –°–ø–∏—Å–æ–∫ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
phrases = [
    "–î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∏–µ —à–∞–≥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—é—Ç –±–æ–ª—å—à–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç üöÄ",
    "–ü—Ä–∏–≤—ã—á–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ, —Ç—ã –º–æ–ª–æ–¥–µ—Ü üîÅ",
    "–¢—ã —É–∂–µ –¥–æ–∫–∞–∑–∞–ª —Å–µ–±–µ, —á—Ç–æ –º–æ–∂–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å üí•",
    "–í–∞–∂–Ω–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ, –∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ üí™",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞ —ç—Ç–æ–º –ø—É—Ç–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ üß†",
    "–¢—ã —Å—Ç—Ä–æ–∏—à—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Å–∏–ª—å–Ω–æ–≥–æ –±—É–¥—É—â–µ–≥–æ üèóÔ∏è",
    "–ü—Ä–æ–¥–æ–ª–∂–∞–π, —Ç—ã –¥–≤–∏–∂–µ—à—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ‚û°Ô∏è",
    "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Å–∏–ª—å–Ω–µ–µ –º–æ—Ç–∏–≤–∞—Ü–∏–∏, –∏ —Ç—ã —ç—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å ‚ö°",
    "–¢—ã —É–∂–µ –¥–∞–ª—å—à–µ, —á–µ–º –±—ã–ª –≤—á–µ—Ä–∞ üëä",
    "–≠—Ç–æ –Ω–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≤—ã–±–æ—Ä üî•"
]

# –°–ø–∏—Å–æ–∫ —ç–º–æ–¥–∑–∏ –¥–ª—è —É–∫—Ä–∞—à–µ–Ω–∏—è
emojis = ["üí™", "üî•", "üèãÔ∏è‚Äç‚ôÇÔ∏è", "‚ö°", "üèÉ‚Äç‚ôÇÔ∏è"]

# –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –∏ —ç–º–æ–¥–∑–∏
phrase = random.choice(phrases)
emoji = random.choice(emojis)

# –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
message = (
    f"–í–∞–ª–µ–Ω—Ç–∏–Ω, —Å –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç–≤–æ–µ–π –ø–æ–ª–µ–∑–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏ –ø—Ä–æ—à–ª–æ "
    f"{days_from_start} –¥–Ω–µ–π!\n\n"
    f"–¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏! üí™\n\n"
    f"{phrase} {emoji}"
)

async def send_message():
    async with Bot(token=TOKEN) as bot:
        await bot.send_message(chat_id=CHAT_ID, text=message)
        print("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:", message)

async def main():
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ...")
    await asyncio.sleep(3)
    await send_message()

if __name__ == "__main__":
    asyncio.run(main())
