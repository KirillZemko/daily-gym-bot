from telegram import Bot
from datetime import datetime, date
import os
import random

def main():
    # =============================
    # –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏ chat_id –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    # =============================
    TOKEN = os.environ["8556828197:AAGivLhNfxbL7i_zNnGucH_9bQUJZkPEQ6s"]        # –¢–≤–æ–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
    CHAT_ID = int(os.environ["24528498"])  # ID –≥—Ä—É–ø–ø—ã –∏–ª–∏ —á–∞—Ç–∞

    bot = Bot(token=TOKEN)

    # =============================
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    # =============================
    friend_name = "–í–∞–ª–µ–Ω—Ç–∏–Ω"
    today = datetime.now().strftime("%d.%m.%Y")
    end_subscription = date(2026, 1, 29)  # –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞

    # –°—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å
    days_left = (end_subscription - date.today()).days
    if days_left < 0:
        days_left = 0

    # –°–ø–∏—Å–æ–∫ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
    phrases = [
        "–º—ã –≤—Å–µ –≤–µ—Ä–∏–º –≤ —Ç–µ–±—è! üí™",
        "–Ω–µ —Å–¥–∞–≤–∞–π—Å—è –∏ –¥–≤–∏–≥–∞–π—Å—è –∫ —Ü–µ–ª–∏! üèãÔ∏è‚Äç‚ôÇÔ∏è",
        "–ø–æ–º–Ω–∏, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —à–∞–≥ –∫ —É—Å–ø–µ—Ö—É! üöÄ",
        "–¥–∞–≤–∞–π, —Å–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å –≤ –∑–∞–ª–µ! üî•",
        "–Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π –∏ –æ—Å—Ç–∞–≤–∞–π—Å—è —Å–∏–ª—å–Ω—ã–º! üí•"
    ]

    # –°–ø–∏—Å–æ–∫ —ç–º–æ–¥–∑–∏ –¥–ª—è —É–∫—Ä–∞—à–µ–Ω–∏—è
    emojis = ["üí™", "üî•", "üèãÔ∏è‚Äç‚ôÇÔ∏è", "‚ö°", "üèÉ‚Äç‚ôÇÔ∏è"]

    # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É –∏ —ç–º–æ–¥–∑–∏
    phrase = random.choice(phrases)
    emoji = random.choice(emojis)

    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    message = (
        f"{friend_name}, —Å–µ–≥–æ–¥–Ω—è {today}, {phrase} "
        f"–î–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ –æ—Å—Ç–∞–ª–æ—Å—å {days_left} –¥–Ω–µ–π. {emoji}"
    )

    # =============================
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
    # =============================
    bot.send_message(chat_id=CHAT_ID, text=message)
    print("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:", message)

# =============================
# –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
# =============================
if __name__ == "__main__":
    main()
